function getAdjustedIndex(t){switch($(".board").attr("player").toLowerCase()){case"black":return 7-t;case"white":return t}}function pieceClick(t,e){$(".selected").removeClass("selected"),$("#piece"+t+e).addClass("selected"),$(".selected").closest("rect").css("stroke-width","1")}function boardClick(t,e){if(0!==$(".selected").length){var n=$(".selected").attr("id").replace("piece",""),o=getAdjustedIndex(parseInt(n[0])),a=getAdjustedIndex(parseInt(n[1]));$.ajax("/Board/MovePiece",{data:{id:$(".board").attr("id"),start:{row:o,column:a},end:{row:getAdjustedIndex(t),column:getAdjustedIndex(e)}},dataType:"html",method:"POST"})}}function undo(){$.ajax("/Board/Undo",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function resign(){$.ajax("/Board/Resign",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function joinGame(){$.ajax("/Board/Join",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function displayGame(t){$.ajax("/Board/DisplayGame",{data:{moveID:t},dataType:"html",method:"POST",success:function(t){$(".board")[0].outerHTML=t}})}function connectToBoard(){var t=new signalR.HttpConnection("/boardHub"),e=new signalR.HubConnection(t);e.on("Update",function(t,e){$(".board").attr("id").toLowerCase()===t.toLowerCase()&&($(".board")[0].outerHTML=e)}),e.start()}function connectToMoveControl(){var t=new signalR.HttpConnection("/movesHub"),e=new signalR.HubConnection(t);e.on("Update",function(t){$(".moves")[0].outerHTML=t}),e.start()}function connectToOpponents(){var t=new signalR.HttpConnection("/opponentsHub"),e=new signalR.HubConnection(t);e.on("Update",function(t,e){var n=["black","white"].filter(function(e){return e!=t.toLowerCase()})[0];switch($("#"+n.toLowerCase()+"-player-text").removeClass("bold"),e){case"WhiteWin":$(".player-to-move").html("White Won"),$(".win-status").html("1 - 0");break;case"BlackWin":$(".player-to-move").html("Black Won"),$(".win-status").html("0 - 1");break;case"Drawn":$(".player-to-move").html("Game Drawn"),$(".win-status").html("½ - ½");break;case"InProgress":$(".player-to-move").html(t+"'s Turn"),$(".win-status").html("*"),$("#"+t.toLowerCase()+"-player-text").addClass("bold")}}),e.start()}function connectToControl(){var t=new signalR.HttpConnection("/controlHub"),e=new signalR.HubConnection(t);e.on("SetAttribute",function(t,e,n){$("#"+t).attr(e,n)}),e.on("RemoveAttribute",function(t,e){$("#"+t).removeAttr(e)}),e.on("AddClass",function(t,e){$("#"+t).addClass(e)}),e.on("RemoveClass",function(t,e){$("#"+t).removeClass(e)}),e.start()}connectToBoard(),connectToMoveControl(),connectToOpponents(),connectToControl();