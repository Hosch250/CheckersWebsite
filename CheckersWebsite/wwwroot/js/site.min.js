function getAdjustedIndex(n){switch($(".board").attr("orientation").toLowerCase()){case"black":return 7-n;case"white":return n}}function pieceClick(n,t){$(".selected").removeClass("selected");$("#piece"+n+t).addClass("selected");$(".selected").closest("rect").css("stroke-width","1")}function boardClick(n,t){if($(".selected").length!==0){var i=$(".selected").attr("id").replace("piece",""),r=getAdjustedIndex(parseInt(i[0])),u=getAdjustedIndex(parseInt(i[1]));$.ajax("/Board/MovePiece",{data:{id:$(".board").attr("id"),start:{row:r,column:u},end:{row:getAdjustedIndex(n),column:getAdjustedIndex(t)}},dataType:"html",method:"POST"})}}function undo(){$.ajax("/Board/Undo",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function resign(){$.ajax("/Board/Resign",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function joinGame(){$.ajax("/Board/Join",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST"})}function displayGame(n){$.ajax("/Board/DisplayGame",{data:{moveID:n,orientation:$(".board").attr("orientation")},dataType:"html",method:"POST",success:function(n){$(".board")[0].outerHTML=n}})}function flip(){switch($(".board").attr("orientation").toLowerCase()){case"black":$(".board").attr("orientation","White");break;case"white":$(".board").attr("orientation","Black")}var n=$(".moves li input:selected");n.length===0&&(n=$(".moves li input:last"));$.ajax("/Board/Orientate",{data:{id:$(".board").attr("id"),moveID:n.length===0?"":n.attr("id"),orientation:$(".board").attr("orientation")},dataType:"html",method:"POST",success:function(n){$(".board")[0].outerHTML=n}})}function connectToBoard(){var t=new signalR.HttpConnection("/boardHub"),n=new signalR.HubConnection(t);n.on("Update",function(n,t,i){if($(".board").attr("id").toLowerCase()===n.toLowerCase()){console.log($(".board").attr("orientation").toLowerCase());switch($(".board").attr("orientation").toLowerCase()){case"black":$(".board")[0].outerHTML=t;break;case"white":$(".board")[0].outerHTML=i}}});n.start()}function connectToMoveControl(){var t=new signalR.HttpConnection("/movesHub"),n=new signalR.HubConnection(t);n.on("Update",function(n){$(".moves")[0].outerHTML=n});n.start()}function connectToOpponents(){var t=new signalR.HttpConnection("/opponentsHub"),n=new signalR.HubConnection(t);n.on("Update",function(n,t){var i=["black","white"].filter(function(t){return t!=n.toLowerCase()})[0];$("#"+i.toLowerCase()+"-player-text").removeClass("bold");switch(t){case"WhiteWin":$(".player-to-move").html("White Won");$(".win-status").html("1 - 0");break;case"BlackWin":$(".player-to-move").html("Black Won");$(".win-status").html("0 - 1");break;case"Drawn":$(".player-to-move").html("Game Drawn");$(".win-status").html("½ - ½");break;case"InProgress":$(".player-to-move").html(n+"'s Turn");$(".win-status").html("*");$("#"+n.toLowerCase()+"-player-text").addClass("bold")}});n.start()}function connectToControl(){var t=new signalR.HttpConnection("/controlHub"),n=new signalR.HubConnection(t);n.on("SetAttribute",function(n,t,i){$("#"+n).attr(t,i)});n.on("RemoveAttribute",function(n,t){$("#"+n).removeAttr(t)});n.on("AddClass",function(n,t){$("#"+n).addClass(t)});n.on("RemoveClass",function(n,t){$("#"+n).removeClass(t)});n.start()}connectToBoard();connectToMoveControl();connectToOpponents();connectToControl();