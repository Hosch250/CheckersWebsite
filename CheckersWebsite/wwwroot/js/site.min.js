function getAdjustedIndex(e){switch($(".board").attr("player").toLowerCase()){case"black":return 7-e;case"white":return e}}function pieceClick(e,t){$(".selected").removeClass("selected"),$("#piece"+e+t).addClass("selected"),$(".selected").closest("rect").css("stroke-width","1")}function boardClick(e,t){if(0!==$(".selected").length){var n=$(".selected").attr("id").replace("piece",""),o=getAdjustedIndex(parseInt(n[0])),a=getAdjustedIndex(parseInt(n[1]));$.ajax("Board/MovePiece",{data:{id:$(".board").attr("id"),start:{row:o,column:a},end:{row:getAdjustedIndex(e),column:getAdjustedIndex(t)}},dataType:"html",method:"POST"})}}function undo(){$.ajax("Board/Undo",{data:{id:$(".board").attr("id")},dataType:"html",method:"POST",success:function(e){$(".board").parent().html(e)}})}function connectToBoard(){var e=new signalR.HttpConnection("/boardHub"),t=new signalR.HubConnection(e);t.on("Update",function(e,t){$(".board").attr("id").toLowerCase()===e.toLowerCase()&&($(".board")[0].outerHTML=t)}),t.start()}function connectToMoveControl(){var e=new signalR.HttpConnection("/movesHub"),t=new signalR.HubConnection(e);t.on("Update",function(e){$(".moves")[0].outerHTML=e}),t.start()}function connectToOpponents(){var e=new signalR.HttpConnection("/opponentsHub"),t=new signalR.HubConnection(e);t.on("Update",function(e,t){var n=["black","white"].filter(function(t){return t!=e.toLowerCase()})[0];switch($("#"+n.toLowerCase()+"-player-text").removeClass("bold"),t){case"WhiteWin":$(".player-to-move").html("White Won"),$(".win-status").html("1 - 0");break;case"BlackWin":$(".player-to-move").html("Black Won"),$(".win-status").html("0 - 1");break;case"Drawn":$(".win-status").html("½ - ½");break;case"InProgress":$(".player-to-move").html(e+"'s Turn"),$(".win-status").html("*"),$("#"+e.toLowerCase()+"-player-text").addClass("bold")}}),t.start()}connectToBoard(),connectToMoveControl(),connectToOpponents();